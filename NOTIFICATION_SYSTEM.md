# Newton App - λ…Έν‹°ν”ΌμΌ€μ΄μ… μ‹μ¤ν… κµ¬ν„ μ™„λ£

## π‰ κµ¬ν„ μ™„λ£ μ‚¬ν•­

### 1. ν•µμ‹¬ κΈ°λ¥
- β… **μ‹¤μ‹κ°„ λ…Έν‹°ν”ΌμΌ€μ΄μ… μ‹μ¤ν…**: Supabase μ‹¤μ‹κ°„ κµ¬λ…μ„ ν†µν• μ¦‰μ‹ μ•λ¦Ό
- β… **μ¤νƒ€/ν”λ΅μ° μ΄λ²¤νΈ ν†µν•©**: μ‚¬μ©μκ°€ λ…ΈνΈμ— μ¤νƒ€ν•κ±°λ‚ λ‹¤λ¥Έ μ‚¬μ©μλ¥Ό ν”λ΅μ°ν•  λ• μλ™ μ•λ¦Ό μƒμ„±
- β… **ν™ν™”λ©΄ μ•λ¦Ό μ•„μ΄μ½**: μ½μ§€ μ•μ€ μ•λ¦Ό μ λ°°μ§€μ™€ μ• λ‹λ©”μ΄μ… ν¨κ³Ό
- β… **μ•λ¦Ό λ©λ΅ ν™”λ©΄**: λ¨λ“  μ•λ¦Όμ„ κ΄€λ¦¬ν•  μ μλ” μ „μ© ν™”λ©΄
- β… **μλ™ μ¤‘λ³µ λ°©μ§€**: κ°™μ€ μ΄λ²¤νΈμ— λ€ν• μ¤‘λ³µ μ•λ¦Ό μƒμ„± λ°©μ§€
- β… **μκΈ° μμ‹  μ•λ¦Ό ν•„ν„°λ§**: μμ‹ μ λ…ΈνΈ μ¤νƒ€/μκΈ° μμ‹  ν”λ΅μ° μ‹ μ•λ¦Ό μƒμ„±ν•μ§€ μ•μ

### 2. μ£Όμ” μ»΄ν¬λ„νΈ λ° μ„λΉ„μ¤

#### π“ μ„λΉ„μ¤ λ μ΄μ–΄
- **`/src/services/notifications.js`**: λ…Έν‹°ν”ΌμΌ€μ΄μ… CRUD λ° μ‹¤μ‹κ°„ κµ¬λ… κ΄€λ¦¬
- **`/src/store/SocialStore.js`**: μ†μ… μ•΅μ…(μ¤νƒ€/ν”λ΅μ°)κ³Ό λ…Έν‹°ν”ΌμΌ€μ΄μ… ν†µν•©
- **`/src/store/NotificationStore.js`**: λ…Έν‹°ν”ΌμΌ€μ΄μ… μƒνƒ κ΄€λ¦¬ (Zustand)

#### π£ μ»¤μ¤ν…€ ν›…
- **`/src/hooks/useNotifications.js`**: λ…Έν‹°ν”ΌμΌ€μ΄μ… κΈ°λ¥μ„ μ„ν• μ»¤μ¤ν…€ ν›…
  - `useNotifications()`: κΈ°λ³Έ λ…Έν‹°ν”ΌμΌ€μ΄μ… κ΄€λ¦¬
  - `useNotificationsByType()`: νƒ€μ…λ³„ λ…Έν‹°ν”ΌμΌ€μ΄μ… ν•„ν„°λ§
  - `useCreateNotification()`: λ…Έν‹°ν”ΌμΌ€μ΄μ… μƒμ„±
  - `useNotificationSettings()`: λ…Έν‹°ν”ΌμΌ€μ΄μ… μ„¤μ • κ΄€λ¦¬
  - `useRealtimeNotifications()`: μ‹¤μ‹κ°„ μ•λ¦Ό μ²λ¦¬

#### π¨ UI μ»΄ν¬λ„νΈ
- **`/src/components/NotificationBell.js`**: ν—¤λ”μ μ•λ¦Ό μ•„μ΄μ½ (λ°°μ§€ + μ• λ‹λ©”μ΄μ…)
- **`/src/screens/NotificationsScreen.js`**: μ•λ¦Ό λ©λ΅ ν™”λ©΄
- **`/src/components/NotificationItem.js`**: κ°λ³„ μ•λ¦Ό μ•„μ΄ν…
- **`/src/components/HeaderComponent.js`**: μ—…λ°μ΄νΈλ ν—¤λ” (NotificationBell ν¬ν•¨)

#### π—„οΈ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
- **`/src/database/notifications_schema.sql`**: μ™„μ „ν• Supabase μ¤ν‚¤λ§
  - `notifications` ν…μ΄λΈ”
  - `notification_settings` ν…μ΄λΈ”
  - μλ™ μ•λ¦Ό νΈλ¦¬κ±° ν•¨μλ“¤
  - Row Level Security μ •μ±…

### 3. ν†µν•©λ μ†μ… μ•΅μ…

#### β­ μ¤νƒ€ μ•΅μ… ν†µν•©
```javascript
// SocialStore.jsμ—μ„ μ¤νƒ€ μ•΅μ… μ‹ μλ™μΌλ΅ λ…Έν‹°ν”ΌμΌ€μ΄μ… μƒμ„±
await starNote(noteId, userId);
// β†’ μλ™μΌλ΅ λ…ΈνΈ μ†μ μμ—κ² μ¤νƒ€ μ•λ¦Ό μƒμ„±
```

#### π‘¥ ν”λ΅μ° μ•΅μ… ν†µν•©
```javascript
// SocialStore.jsμ—μ„ ν”λ΅μ° μ•΅μ… μ‹ μλ™μΌλ΅ λ…Έν‹°ν”ΌμΌ€μ΄μ… μƒμ„±
await followUser(followerId, followingId);
// β†’ μλ™μΌλ΅ ν”λ΅μ°λ μ‚¬μ©μμ—κ² ν”λ΅μ° μ•λ¦Ό μƒμ„±
```

### 4. μ‹¤μ‹κ°„ κΈ°λ¥
- **Supabase Real-time**: μƒλ΅μ΄ μ•λ¦Ό μ¦‰μ‹ μμ‹ 
- **μλ™ λ°°μ§€ μ—…λ°μ΄νΈ**: μ½μ§€ μ•μ€ μ•λ¦Ό μ μ‹¤μ‹κ°„ λ°μ
- **μ• λ‹λ©”μ΄μ… ν¨κ³Ό**: μƒ μ•λ¦Ό μ‹ λ²¨ μ•„μ΄μ½ ν”λ“¤λ¦Ό + λ°°μ§€ ν„μ¤ ν¨κ³Ό

### 5. μ‚¬μ©μ κ²½ν—
- **μλ™ μ΄κΈ°ν™”**: μ‚¬μ©μ λ΅κ·ΈμΈ μ‹ μ•λ¦Ό μ‹μ¤ν… μλ™ ν™μ„±ν™”
- **λ°°μΉ μ½κΈ°**: "λ¨λ‘ μ½μ" κΈ°λ¥μΌλ΅ λ¨λ“  μ•λ¦Ό μΌκ΄„ μ²λ¦¬
- **Pull-to-refresh**: μ•λ¦Ό λ©λ΅μ—μ„ λ‹Ήκ²¨μ„ μƒλ΅κ³ μΉ¨
- **λ¬΄ν• μ¤ν¬λ΅¤**: μ¤λλ μ•λ¦ΌκΉμ§€ λμ—†μ΄ λ΅λ“

### 6. μ„±λ¥ μµμ ν™”
- **React.memo**: λ¶ν•„μ”ν• λ¦¬λ λ”λ§ λ°©μ§€
- **useCallback/useMemo**: μ½λ°± λ° κ³„μ‚° μµμ ν™”
- **AsyncStorage μ§€μ†ν™”**: μ¤ν”„λΌμΈ μƒνƒμ—μ„λ„ μ•λ¦Ό λ°μ΄ν„° μ μ§€
- **μ¤‘λ³µ λ°©μ§€**: κ³ μ  IDλ΅ λ™μΌ μ΄λ²¤νΈ μ¤‘λ³µ μ•λ¦Ό μ°¨λ‹¨

## π›  κΈ°μ  μ¤νƒ

- **λ°±μ—”λ“**: Supabase (PostgreSQL + Real-time)
- **μƒνƒκ΄€λ¦¬**: Zustand + AsyncStorage
- **UI**: React Native + react-native-vector-icons
- **μ• λ‹λ©”μ΄μ…**: React Native Animated API

## π“± μ‚¬μ©λ²•

### κ°λ°μλ¥Ό μ„ν• ν…μ¤νΈ λ„κµ¬
```javascript
import testUtils from '../utils/testNotificationIntegration';

// μ¤νƒ€ μ•λ¦Ό ν…μ¤νΈ
await testUtils.testStarNotificationIntegration(noteId, noteOwnerId);

// ν”λ΅μ° μ•λ¦Ό ν…μ¤νΈ
await testUtils.testFollowNotificationIntegration(userIdToFollow);

// μ‹μ¤ν… μƒνƒ ν™•μΈ
testUtils.checkNotificationSystemStatus();

// ν†µν•© ν…μ¤νΈ μ‹¤ν–‰
await testUtils.runIntegrationTest(testNoteId, testUserId);
```

### μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ©
```javascript
import { useNotifications } from '../hooks/useNotifications';

const MyComponent = () => {
  const { 
    notifications, 
    unreadCount, 
    markAsRead, 
    markAllAsRead 
  } = useNotifications();
  
  // μ•λ¦Ό λ°μ΄ν„° μ‚¬μ©
  // ...
};
```

## π― λ‹¤μ λ‹¨κ³„ (μ•„μ§ λ―Έκµ¬ν„)

1. **ν‘Έμ‹ λ…Έν‹°ν”ΌμΌ€μ΄μ…**: React Native + Expo ν‘Έμ‹ μ•λ¦Ό
2. **λ„¤λΉ„κ²μ΄μ… μ—°λ™**: μ•λ¦Ό ν΄λ¦­ μ‹ κ΄€λ ¨ ν™”λ©΄μΌλ΅ μ΄λ™
3. **μ΄λ©”μΌ μ•λ¦Ό**: μ¤‘μ”ν• μ•λ¦Όμ μ΄λ©”μΌ λ°μ†΅
4. **μ•λ¦Ό μ„¤μ • ν™”λ©΄**: μ‚¬μ©μκ°€ μ•λ¦Ό νƒ€μ…λ³„ on/off μ„¤μ •
5. **λ©μ… μ‹μ¤ν…**: λ…ΈνΈμ—μ„ μ‚¬μ©μ νƒκ·Έ μ‹ μ•λ¦Ό

## π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### κΈ°λ³Έ μ‹λ‚λ¦¬μ¤
1. μ‚¬μ©μ Aκ°€ μ‚¬μ©μ Bμ λ…ΈνΈμ— μ¤νƒ€
2. μ‚¬μ©μ Bμ—κ² μ¦‰μ‹ μ•λ¦Ό μƒμ„±
3. HeaderComponentμ NotificationBellμ— λ°°μ§€ ν‘μ‹
4. μ‚¬μ©μ Bκ°€ μ•λ¦Όμ„ ν΄λ¦­ν•μ—¬ NotificationsScreenμΌλ΅ μ΄λ™
5. μ•λ¦Ό μ½μ μ²λ¦¬λλ©° λ°°μ§€ μ«μ κ°μ†

### μ—£μ§€ μΌ€μ΄μ¤
- β… μμ‹ μ λ…ΈνΈμ— μ¤νƒ€: μ•λ¦Ό μƒμ„±λμ§€ μ•μ
- β… μκΈ° μμ‹  ν”λ΅μ°: μ•λ¦Ό μƒμ„±λμ§€ μ•μ
- β… μ¤‘λ³µ μ¤νƒ€: κΈ°μ΅΄ μ¤νƒ€ μ κ±° ν›„ μ¬μ¤νƒ€ μ‹ μƒλ΅μ΄ μ•λ¦Ό μƒμ„±
- β… λ„¤νΈμ›ν¬ μ¤λ¥: λ΅μ»¬ μƒνƒ λ΅¤λ°± λ° μ—λ¬ μ²λ¦¬

## π“ λ¨λ‹ν„°λ§ λ° λ””λ²„κΉ…

λ¨λ“  μ£Όμ” μ•΅μ…μ€ μ½μ†”μ— μƒμ„Έν• λ΅κ·Έλ¥Ό μ¶λ ¥ν•©λ‹λ‹¤:
- π”” μ•λ¦Ό μƒμ„±/μμ‹ 
- β­ μ¤νƒ€ μ•΅μ…
- π‘¥ ν”λ΅μ° μ•΅μ…
- π“± μ‹¤μ‹κ°„ κµ¬λ… μƒνƒ
- β μ—λ¬ λ° μμ™Έ μƒν™©

## β… μ™„λ£λ ν†µν•© ν…μ¤νΈ

- [x] μ¤νƒ€ μ•΅μ… β†’ μ•λ¦Ό μƒμ„± β†’ μ‹¤μ‹κ°„ λ°°μ§€ μ—…λ°μ΄νΈ
- [x] ν”λ΅μ° μ•΅μ… β†’ μ•λ¦Ό μƒμ„± β†’ μ‹¤μ‹κ°„ λ°°μ§€ μ—…λ°μ΄νΈ
- [x] μ•λ¦Ό μ½μ μ²λ¦¬ β†’ λ°°μ§€ μΉ΄μ΄νΈ κ°μ†
- [x] λ¨λ“  μ•λ¦Ό μ½μ β†’ λ°°μ§€ μ¨κΉ€
- [x] μκΈ° μμ‹  μ•΅μ… ν•„ν„°λ§ ν™•μΈ
- [x] μ¤‘λ³µ μ•λ¦Ό λ°©μ§€ ν™•μΈ
- [x] μ‹¤μ‹κ°„ κµ¬λ… μ •μƒ μ‘λ™ ν™•μΈ

---

**κµ¬ν„ μ™„λ£μΌ**: 2025λ…„ 1μ›” 15μΌ  
**μ΄ κ°λ° μ‹κ°„**: μ•½ 4μ‹κ°„  
**μ£Όμ” νμΌ μ**: 15κ°  
**μ½”λ“ λΌμΈ μ**: μ•½ 2,000μ¤„  

π‰ **Newton μ•±μ λ…Έν‹°ν”ΌμΌ€μ΄μ… μ‹μ¤ν…μ΄ μ„±κ³µμ μΌλ΅ κµ¬ν„λμ—μµλ‹λ‹¤!**